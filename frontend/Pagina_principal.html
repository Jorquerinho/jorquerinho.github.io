<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Partida - Ajedrez Online</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <nav>
        <div class="nav-container" style="display: flex; align-items: center; justify-content: space-between;">
            <div class="logo" style="display: flex; align-items: center;">
                <img src="black_logo.png" alt="Logo" />
            </div>
            <ul class="nav-links" style="display: flex; gap: 10px; list-style: none; margin: 0; padding: 0;">
                <li><a href="index.html">Página de Inicio</a></li>
                <li><a href="registro.html">Registro</a></li>
                <li><a href="perfil.html">Perfil</a></li>
                <li><a href="partida.html">Partida</a></li>
                <li><a href="historia.html">Historia</a></li>
                <li><a href="desarrolladores.html">Desarrolladores</a></li>
            </ul>
            <!-- Mensaje de bienvenida al usuario -->
            <span id="mensajeUsuario" style="font-weight: bold; color: darkblue; margin-left: 15px;"></span>
        </div>
    </nav>

    <main>
        <section class="game-stats-and-create">
            <div class="container">
                <div class="stats-and-button-container">
                    <div class="game-stats">
                        <h2>Estadísticas</h2>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-label">Victorias:</span>
                                <span class="stat-value">15</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Derrotas:</span>
                                <span class="stat-value">8</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Empates:</span>
                                <span class="stat-value">3</span>
                            </div>
                        </div>
                    </div>
                    <div class="create-game-button-container">
                        <button class="create-game-button">Crear Nueva Partida</button>
                    </div>
                </div>
            </div>
        </section>

        <section class="game-lists">
            <div class="container">
                <div class="game-lists-grid">
                    <div class="current-games">
                        <h2>Partidas en Curso</h2>
                        <ul>
                            <li><a href="#">Partida vs. Jugador1 (En curso)</a></li>
                            <li><a href="#">Partida vs. Jugador2 (En curso)</a></li>
                            <li><a href="#">Partida vs. Jugador3 (En curso)</a></li>
                        </ul>
                    </div>
                    <div class="finished-games">
                        <h2>Historial de Partidas</h2>
                        <ul>
                            <li><a href="#">Partida vs. Jugador4 (Victoria)</a></li>
                            <li><a href="#">Partida vs. Jugador5 (Derrota)</a></li>
                            <li><a href="#">Partida vs. Jugador6 (Tablas)</a></li>
                            <li><a href="#">Partida vs. Jugador7 (Victoria)</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section class="public-games">
            <div class="container">
                <h2>Partidas Públicas Disponibles</h2>
                <ul>
                    <li><a href="#">Partida Pública 1 (Jugador: Jugador8)</a></li>
                    <li><a href="#">Partida Pública 2 (Jugador: Jugador9)</a></li>
                    <li><a href="#">Partida Pública 3 (Jugador: Jugador10)</a></li>
                </ul>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Proyecto Semestral - Ajedrez Online</p>
    </footer>

   <script>
  // Cuando la página carga, pedimos la info del usuario logueado
  fetch('/usuario-info')
    .then(res => {
      console.log('Respuesta status:', res.status);
      if (res.status === 401) {
        console.log('Usuario no autenticado');
        return null;
      }
      return res.json();
    })
    .then(data => {
      console.log('Datos recibidos:', data);
      if (data && data.nombre) {   // Cambié aquí: data.nombre en vez de data.email
        document.getElementById('mensajeUsuario').textContent = `Bienvenido ${data.nombre}`;
        alert(`Bienvenido ${data.nombre}`);  // Aquí debería salir el pop-up
      } else {
        console.log('No hay datos de nombre para mostrar.');
      }
    })
    .catch(err => {
      console.error('Error obteniendo info del usuario:', err);
    });
</script>
</body>
</html>